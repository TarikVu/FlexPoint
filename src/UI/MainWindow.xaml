<Window x:Class="UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:local="clr-namespace:UI.ViewModels"
        Title="FlexPoint (Demo)" Height="700" Width="1000" ResizeMode="CanResize">
    <Window.Resources>
        <Style x:Key="MuscleButton" TargetType="Button">
            <Setter Property="Width" Value="100"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Resources>
    <Window.DataContext>
        <local:MainViewModel />
    </Window.DataContext>

    <!-- Main Grid, 3 Cols -->
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Image section (left column, full height) -->
        <Image Grid.Column="0" Source="{Binding HoveredImageSource}"
               HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20"/>

        <!-- Middle Column w/ 2 Rows -->
        <Grid Grid.Column="1" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>


            <WrapPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Button Content="Abs" Command="{Binding FetchExercisesCommand}" CommandParameter="abs" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="abs"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Abductors" Command="{Binding FetchExercisesCommand}" CommandParameter="abductors" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="abductors"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Biceps" Command="{Binding FetchExercisesCommand}" CommandParameter="biceps" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="biceps"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Calves" Command="{Binding FetchExercisesCommand}" CommandParameter="calves" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="calves"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Delts" Command="{Binding FetchExercisesCommand}" CommandParameter="delts" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="delts"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Forearms" Command="{Binding FetchExercisesCommand}" CommandParameter="forearms" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="forearms"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Glutes" Command="{Binding FetchExercisesCommand}" CommandParameter="glutes" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="glutes"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Hamstrings" Command="{Binding FetchExercisesCommand}" CommandParameter="hamstrings" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="hamstrings"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Lats" Command="{Binding FetchExercisesCommand}" CommandParameter="lats" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="lats"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Pectorals" Command="{Binding FetchExercisesCommand}" CommandParameter="pectorals" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="pectorals"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Quads" Command="{Binding FetchExercisesCommand}" CommandParameter="quads" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="quads"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Traps" Command="{Binding FetchExercisesCommand}" CommandParameter="traps" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="traps"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Content="Triceps" Command="{Binding FetchExercisesCommand}" CommandParameter="triceps" Style="{StaticResource MuscleButton}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseEnter">
                            <i:InvokeCommandAction Command="{Binding MouseEnterCommand}" CommandParameter="triceps"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="MouseLeave">
                            <i:InvokeCommandAction Command="{Binding MouseLeaveCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

            </WrapPanel>

            <Grid Grid.Row="1" Margin="0,10,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>



                <ListBox 
                     DisplayMemberPath="Name"
                     ItemsSource="{Binding Exercises}"
                     SelectedItem="{Binding SelectedExercise, Mode=TwoWay}"
                     Grid.Row="1" VerticalAlignment="Stretch" ScrollViewer.VerticalScrollBarVisibility="Auto"/>

            </Grid>


        </Grid>

        <!-- Rightmost Column -->
        <Grid Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Top Area with Buttons and Added Exercises ListBox -->
            <StackPanel Grid.Row="0" Margin="10">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="Remove" Command="{Binding RemoveExerciseCommand}" Margin="5"/>
                    <Button Content="Save" Margin="5"/>
                    <Button Content="Upload" Margin="5"/>
                </StackPanel>

                <ListBox 
                    ItemsSource="{Binding AddedExercises}"
                    SelectedItem="{Binding SelectedAddedExercise, Mode=TwoWay}"
                    DisplayMemberPath="Name"
                    Height="150" Margin="0,10,0,0" ScrollViewer.VerticalScrollBarVisibility="Auto"/>
            </StackPanel>

            <Border Grid.Row="1" Margin="10" BorderBrush="Black" BorderThickness="1">
                <ScrollViewer Grid.Row="1" Margin="10" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <TextBlock Text="{Binding SelectedExerciseSteps}" 
               TextWrapping="Wrap" 
               VerticalAlignment="Top" />
                </ScrollViewer>

            </Border>
            <Button 
                Content="Add Exercise"
                Command="{Binding AddExerciseCommand}"
                Grid.Row="2" HorizontalAlignment="Center"
                Margin="5" Padding="5" Width="150" FontSize="14"
                 />

        </Grid>

        <Border Grid.Column="1" Grid.ColumnSpan="2" Grid.RowSpan="2" Background="#80000000" 
            Visibility="{Binding ProgressVisibility}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
            Panel.ZIndex="1">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="10">
                <TextBlock Text="Fetching..." HorizontalAlignment="Center" VerticalAlignment="Center" 
                   Foreground="White" FontSize="20" FontWeight="Bold" Margin="0,0,0,10"/>
                <ProgressBar 
            Value="{Binding CurrentProgress, Mode=OneWay}" 
            Width="200" Height="20" 
            HorizontalAlignment="Center"  />
            </StackPanel>
        </Border>

    </Grid>
</Window>
